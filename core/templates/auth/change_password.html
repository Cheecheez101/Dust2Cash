<!doctype html>
{% extends 'base.html' %}
{% load static %}

{% block title %}Change Password Â· Dust2Cash{% endblock %}
{% block body_class %}dashboard-body{% endblock %}

{% block content %}
<nav class="navbar dashboard-nav bg-white shadow-sm">
  <div class="nav-inner container">
    <a class="nav-identity" href="/">
      <img src="{% static 'img/dust2cashlogo.png' %}" alt="Dust2Cash logo">
      <div>
        <strong>Dust2Cash</strong>
        <div class="text-muted small">Account security</div>
      </div>
    </a>
    <div class="nav-actions">
      <a class="nav-pill nav-pill--ghost" href="{% url 'client_dashboard' %}">Client</a>
      <a class="nav-pill nav-pill--ghost" href="{% url 'agent_portal' %}">Agent</a>
      <a class="nav-pill nav-pill--danger" href="{% url 'logout' %}">Logout</a>
    </div>
  </div>
</nav>

<main class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10">
      <section class="dashboard-grid mb-4">
        <div class="stat-card">
          <div class="stat-label">User</div>
          <div class="stat-value fs-4">{{ request.user.get_full_name|default:request.user.username }}</div>
          <small class="text-muted">Account holder</small>
        </div>
        <div class="stat-card">
          <div class="stat-label">Email</div>
          <div class="stat-value fs-5">{{ request.user.email|default:'Not set' }}</div>
          <small class="text-muted">Login + notices</small>
        </div>
        <div class="stat-card">
          <div class="stat-label">Role</div>
          <div class="stat-value fs-4">{{ user_portal.role|title }}</div>
          <small class="text-muted">Determines dashboard</small>
        </div>
      </section>
    </div>
    <div class="col-md-6">
      <div class="card shadow-sm border-0">
        <div class="card-body p-4">
          <h3>Change Password</h3>
          {% if messages %}{% for message in messages %}<div class="alert alert-{{ message.tags }}">{{ message }}</div>{% endfor %}{% endif %}

          <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <div class="d-grid mt-3">
              <button class="btn btn-gold">Update Password</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</main>
{% endblock %}
